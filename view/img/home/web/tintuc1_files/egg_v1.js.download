try{(function(g,n,E,q){(function(){if("undefined"!==typeof localStorage)try{return localStorage.setItem("egguuu","yes"),"yes"===localStorage.getItem("egguuu")?(localStorage.removeItem("egguuu"),!0):!1}catch(a){return!1}else return!1})();var R=g.encodeURIComponent,V=g.decodeURIComponent,ea=unescape,S=navigator,fa=function(a,b){var d=new XMLHttpRequest;d.open("GET",a,!0);d.responseType="json";d.onload=function(){var c=d.status;200===c?b(null,d.response):b(c,d.response)};d.onerror=function(){b("error",
{})};d.send()},A=function(a){return(a=(new RegExp("(^|;)[ ]*"+a+"=([^;]*)")).exec(n.cookie))?V(a[2]):""},B=function(a,b,d,c){var e=document.domain.split(".");!d&&(d=0);!c&&(c=31449600);if(1<e.length&&b)for(var h="."+e[e.length-1],f=e.length-2;0<=f;f--){h="."+e[f]+h;var l=void 0,w=a,u=b,v=c,k=h;v&&(l=new Date,l.setTime(l.getTime()+1E3*v));n.cookie=w+"="+R(u)+(v?";expires="+l.toGMTString():"")+";path=/"+(k?";domain="+k:"");if(A(a)==b){0==d&&(d=window,e=window.name,h=a,f=b,-1<e.indexOf("&"+h+"=")||0===
e.indexOf(h+"=")?(l=e.indexOf("&"+h+"="),-1===l&&(l=e.indexOf(h+"=")),c=e.indexOf("&",l+1),c=-1!==c?e.substr(0,l)+e.substr(c+(l?0:1))+"&"+h+"="+f:e.substr(0,l)+"&"+h+"="+f):c=e+"&"+h+"="+f,d.name=c,window.localStorage&&"function"==typeof window.localStorage.setItem&&window.localStorage.setItem(a,b));break}}};q=function(){fa("http://g.eclick.vn/iplocation",function(a,b){""==A("fosp_loc")&&b.data&&b.data.country_code&&(I=[b.data.province_id,b.data.region_id,b.data.country_code].join("-"),B("fosp_loc",
I,0,86400))})};a:{if(S=this.navigator)if(E=S.userAgent){var T=E;break a}T=""}var J=function(a){return-1!=T.toLowerCase().indexOf(a.toLowerCase())},W=function(){return J("iPad")||J("Android")&&!J("Mobile")||J("Silk")},X=function(){return/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/i.test(T)},I=A("fosp_loc");""==I&&q();var K=function(a){var b=A(a)||"",d=(new RegExp("(^|&)[ ]*"+a+"=([^&]*)",
"i")).exec(window.name);d=d&&2<d.length&&window.decodeURIComponent(d[2])||"";var c="";window.localStorage&&"function"==typeof window.localStorage.getItem&&(c=window.localStorage.getItem(a));return b||c||d},Y="---",U=function(){for(var a="",b=0;16>b;b++)a+="abcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(36*Math.random()));b=X()?"mob":W()?"tab":"des";return a+"."+Math.floor((new Date).getTime()/1E3)+"."+b};q=function(a){if(n.cookie!=Y||2==a){Y=n.cookie;var b=parseInt("0"+A("myvne_user_id"))||
0,d=A("fosp_aid"),c=A("orig_aid");a=K("fosp_aid")||"";var e=K("orig_aid")||"";if(1E4<b)d!=b&&(B("fosp_aid",b),d!=c&&(e=12<a.length?a:12<e.length?e:U(),B("orig_aid",e)));else if(""!=a&&a==parseInt("0"+a))B("fosp_aid",e);else if(""!=e&&e!=parseInt("0"+e))B("fosp_aid",e),B("orig_aid",e);else if(d!=c||""==d||""==c)b=12<a.length?a:12<e.length?e:U(),a!=b&&B("fosp_aid",b),e!=b&&B("orig_aid",b)}};"undefined"==typeof window.FospAnalyticsNew&&(g.setInterval(q,1E3),q(2));var L=!1,M=g._logEgg||(g._logEgg=[]);
q=g.PAGE_DETAIL||0;var Z=function(a){var b=function(N,F){return N<<F|N>>>32-F},d=function(N){var F="",O;for(O=7;0<=O;O--)F+=(N>>>4*O&15).toString(16);return F},c,e=[],h=1732584193,f=4023233417,l=2562383102,w=271733878,u=3285377520,v=[];a=ea(R(a));var k=a.length;for(c=0;c<k-3;c+=4){var p=a.charCodeAt(c)<<24|a.charCodeAt(c+1)<<16|a.charCodeAt(c+2)<<8|a.charCodeAt(c+3);v.push(p)}switch(k&3){case 0:c=2147483648;break;case 1:c=a.charCodeAt(k-1)<<24|8388608;break;case 2:c=a.charCodeAt(k-2)<<24|a.charCodeAt(k-
1)<<16|32768;break;case 3:c=a.charCodeAt(k-3)<<24|a.charCodeAt(k-2)<<16|a.charCodeAt(k-1)<<8|128}for(v.push(c);14!==(v.length&15);)v.push(0);v.push(k>>>29);v.push(k<<3&4294967295);for(a=0;a<v.length;a+=16){for(c=0;16>c;c++)e[c]=v[a+c];for(c=16;79>=c;c++)e[c]=b(e[c-3]^e[c-8]^e[c-14]^e[c-16],1);p=h;k=f;var r=l,t=w,x=u;for(c=0;19>=c;c++){var y=b(p,5)+(k&r|~k&t)+x+e[c]+1518500249&4294967295;x=t;t=r;r=b(k,30);k=p;p=y}for(c=20;39>=c;c++)y=b(p,5)+(k^r^t)+x+e[c]+1859775393&4294967295,x=t,t=r,r=b(k,30),k=
p,p=y;for(c=40;59>=c;c++)y=b(p,5)+(k&r|k&t|r&t)+x+e[c]+2400959708&4294967295,x=t,t=r,r=b(k,30),k=p,p=y;for(c=60;79>=c;c++)y=b(p,5)+(k^r^t)+x+e[c]+3395469782&4294967295,x=t,t=r,r=b(k,30),k=p,p=y;h=h+p&4294967295;f=f+k&4294967295;l=l+r&4294967295;w=w+t&4294967295;u=u+x&4294967295}y=d(h)+d(f)+d(l)+d(w)+d(u);return y.toLowerCase()},ha=function(a,b,d){return a.call.apply(a.bind,arguments)},ia=function(a,b,d){if(!a)throw Error();if(2<arguments.length){var c=Array.prototype.slice.call(arguments,2);return function(){var e=
Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,c);return a.apply(b,e)}}return function(){return a.apply(b,arguments)}},P=function(a){try{a="string"!==typeof a?JSON.stringify(a):a}catch(b){return""}return a},C=function(a,b,d){C=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ha:ia;return C.apply(null,arguments)},D=function(a,b,d,c){a.addEventListener?a.addEventListener(b,d,!!c):a.attachEvent?a.attachEvent("on"+b,d):a["on"+b]=d},G=function(a,
b,d,c){a.removeEventListener?a.removeEventListener(b,d,!!c):a.detachEvent?a.detachEvent("on"+b,d):a["on"+b]=null},aa=function(a){var b=/^(?:(?:https?|ftp):)\/*(?:[^@]+@)?([^:/#]+)/.exec(a);return b?b[1]:a},ja=function(a,b){var d=new Image(1,1);if(b){var c=function(e){b(e);G(d,"load",c,!1);G(d,"error",c,!1)};D(d,"load",c,!1);D(d,"error",c,!1)}d.src=a};E=function(a){var b;n.addEventListener?D(n,"DOMContentLoaded",function c(){G(n,"DOMContentLoaded",c,!1);a()},!1):n.attachEvent&&(D(n,"onreadystatechange",
function e(){"complete"===n.readyState&&(G(n,"onreadystatechange",e,!1),a())},!1),n.documentElement.doScroll&&g===g.top&&function h(){if(!L){try{n.documentElement.doScroll("left")}catch(f){setTimeout(h,0);return}a()}}());/WebKit/.test(S.userAgent)&&(b=setInterval(function(){if(L||/loaded|complete/.test(n.readyState))clearInterval(b),a()},10));D(g,"load",a,!1)};var ba=function(a){var b={},d;for(d in a)if(a.hasOwnProperty(d)){var c=a[d],e=typeof c;b[d]="function"===e||"object"===e&&c?ba(a[d]):a[d]}return b},
ca=function(a){return null===a?!1:"function"===typeof a||"object"===typeof a},H=function(){this.version="1404";this.location_url=g.location_url||g.location.href;this.site_id=parseInt("0"+g.SITE_ID);this.pageview_id=this.my_vne=this.fosp_loc=this.fosp_aid=this.uid=null;this.meta={};this.dataLayer={};this.article_id=0;this.action_name="profile_update play pageview buy addtocart checkout read like comment save fblike fbshare twitter ggplus".split(" ");this.action="pageview";this.host=this.referer=this.link_ref=
null;this.platform="1";this.algoRead=this.totalRead=this.readStart=0;this.intervalScroll=this.intervalEvent=!1;this.readView=this.scrollView=0;this.timeEvent=2E3;this.intervalCount=0;this.container=null;this.wordCount=0;this.type="text";this.playEmbed=0;this.logEggType={ts_10:0,ts_20:0,ts_25:0,ts_30:0,ts_40:0,ts_50:0,ts_60:0,ts_70:0,ts_75:0,ts_80:0,ts_90:0,ts_100:0};this.vnTracking=function(){for(var a=g.dataLayer||{},b=0;b<a.length;b++){var d=a[b],c;for(c in d)if("vn_source"==c||"vn_campaign"==c||
"vn_medium"==c||"vn_zone"==c)this.meta[c]=d[c]}};this.init=function(){var a=K("fosp_aid"),b=K("orig_aid");if(!a||""==a||"null"==a){var d;a=(d=/(^|&)[ ]*fosp_aid=([^&]*)/.exec(g.name))?V(d[2]):U()}this.fosp_aid=a.substr(0,40);this.uid=b?b.substr(0,40):this.fosp_aid;this.fosp_loc=I;this.my_vne=A("myvne_user_id");this.pageview_id=window.la_pageview_id&&""!=window.la_pageview_id?window.la_pageview_id:Z(Math.random()+this.fosp_aid+Date.now()).substr(0,32);d={};a=n.getElementsByTagName("meta");b=0;for(var c=
a.length,e=a[b];b<c;e=a[++b]){var h=e.getAttribute("name");e=e.getAttribute("content");null!=h&&(d[h]=e)}this.meta=d;this.article_id=this.meta.its_id||0;this.ref_id=this.meta.its_ref||0;d="";try{d=g.top.document.referrer}catch(l){if(g.parent)try{d=g.parent.document.referrer}catch(w){d=""}}""===d&&(d=n.referrer);this.link_ref=d;this.referer=aa(d);this.host=aa(g.location.href);X()?this.platform="2":W()&&(this.platform="3");this.meta.hasOwnProperty("its_type")&&(this.type=this.meta.its_type||"text");
b=a=0;d="";if("object"==typeof g.dataLayer)for(c=0;c<g.dataLayer.length;c++){e=g.dataLayer[c];for(var f in e)"TaxonomyIndexType"==f&&""!=e[f]&&(d=e[f]),"TaxonomySubTopicId"==f&&""!=e[f]&&(a=e[f]),"TaxonomyIndexFormatId"==f&&""!=e[f]&&(b=e[f])}this.dataLayer={index_topic:a,index_format:b,index_type:d};this.vnTracking()};this.eventBeforeUnLoad=function(a){g.setTimeout(C(this.actualRead,this),0);return!0};this.actualRead=function(){var a=Date.now();if(0<this.readStart){this.algoRead+=a-this.readStart;
this.algoRead=Math.min(this.algoRead,this.totalRead);var b=Math.min(100,Math.floor(100*this.algoRead/this.totalRead));b=10*Math.floor(b/10);b>this.readView&&(this.readView=b);b=Math.min(this.readView,this.scrollView);var d="ts_"+b;!this.logEggType[d]&&(this.logEggType[d]=1,this.sendLog({action:"read",ratio:b,pv_read:this.algoRead,pv_scroll:this.scrollView,pv_total:this.totalRead}));b=P({pv_v:this.version,pv_action:"read",pv_type:"article",pv_ratio:this.readView,pv_scroll:this.scrollView,pv_time:this.algoRead});
g.postMessage(b,"*");91<b&&(this.intervalEvent&&g.clearTimeout(this.intervalEvent),G(g,"scroll",da,!1))}this.readStart=a};this.eventVideo=function(a){if(a.detail&&a.detail.type){var b=0;switch(a.detail.type){case "videoComplete":b=100;break;case "videoStart":b=0;break;case "videoPlay":b=0;break;case "videoProgress":b=(""+(a.detail&&a.detail.percent)).replace("%",""),b=1*parseInt(b)}this.logEggType.hasOwnProperty("ts_"+b)&&!this.logEggType["ts_"+b]&&(this.logEggType["ts_"+b]=1,this.sendLog({action:"play",
type:"video",ratio:b}));a=P({pv_v:this.version,pv_action:"play",pv_type:"video",pv_ratio:b});g.postMessage(a,"*")}};this.eventInterval=function(){if("video"==this.type||"play"==this.action)return!1;var a=!0;this.actualRead();6>this.intervalCount?0<this.readStart&&(this.intervalEvent&&g.clearTimeout(this.intervalEvent),this.intervalEvent=g.setTimeout(C(this.eventInterval,this),1E4)):(this.intervalEvent&&g.clearTimeout(this.intervalEvent),this.intervalEvent=null,a=!1);a||(this.readStart=0);this.intervalCount+=
1};this.eventScroll=function(){this.intervalScroll&&(g.clearTimeout(this.intervalScroll),this.intervalEvent&&g.clearTimeout(this.intervalEvent));this.intervalScroll=g.setTimeout(C(this.intervalScrollFunc,this),this.timeEvent)};this.intervalScrollFunc=function(){var a=!1;if(this.container){var b=this.container.getBoundingClientRect();b&&0<b.height&&(b.top<g.innerHeight&&0<b.bottom&&(a=!0),b.top<g.innerHeight&&0<b.bottom?a=!0:this.readStart=0,b=100-100*(b.bottom-g.innerHeight)/b.height,b=95<b?100:85<
b&&95>b?90:75<b&&85>b?80:65<b&&75>b?70:55<b&&65>b?60:45<b&&55>b?50:35<b&&45>b?40:25<b&&35>b?30:15<b&&25>b?20:10,this.scrollView<b&&(this.scrollView=b,b=P({pv_v:this.version,pv_action:"read",pv_type:"article",pv_ratio:this.readView,pv_scroll:this.scrollView,pv_time:this.algoRead}),g.postMessage(b,"*")))}a&&(this.intervalCount=0,this.eventInterval())};this.initReady=function(){var a=this.meta.hasOwnProperty("its_wordcount")&&parseInt(this.meta.its_wordcount,10)||0;if("video"==this.type||"play"==this.action)this.scrollView=
100,this.totalRead=0<a?1E3*a:0,D(g,"PlayerCustomEvent",C(this.eventVideo,this),!1);else{var b=function(u){return null===u.replace(/\s+/g,"").match(/([^\x00-\x7F\u2013\u2014])+/gi)==0?u.match(/\S+/g):u.replace(/[;!:\u2014\/]/g," ").replace(/\.\s+/g," ").replace(/[^a-zA-Z\d\s&:,]/g,"").replace(/,([^0-9])/g," $1").match(/\S+/g)},d="",c="",e=0,h=0;try{var f=n.getElementsByClassName("description");0<f.length&&f[0].innerText?d=f[0].innerText:(f=n.getElementsByClassName("short_intro mb15"),0<f.length&&f[0].innerText&&
(d=f[0].innerText))}catch(u){}try{if(f=n.getElementsByClassName("fck_detail"),0==f.length&&(f=n.getElementsByClassName("block_ads_connect"),0==f.length&&(f=n.getElementsByTagName("body"))),0<f.length&&f[0].innerText){this.container=f[0];c=this.container.innerText;var l=this.container.getElementsByTagName("img");if(0<l.length)for(f=0;f<l.length;f++)200<l[f].offsetHeight&&200<l[f].offsetWidth&&(e+=1);var w=n.getElementsByClassName("list-news");0<w.length&&(h=b(w[0].innerText||"").length)}}catch(u){}b=
b(d+" "+c).length-h;this.wordCount=Math.max(b,a,0);a=0;0<e&&(a="photo"==this.type?10*e:5*e);this.totalRead=1E3*(a+Math.round(this.wordCount/5.83))}1>this.totalRead&&(this.totalRead=1);this.readStart=Date.now();this.timeEvent=2E3;this.eventScroll();a=P({pv_v:this.version,pv_action:"init_ready",pv_word_count:this.wordCount,pv_total_read:this.totalRead,pv_read_start:this.readStart,pv_data_layer:this.dataLayer});g.postMessage(a,void 0)}};H.prototype.sendLog=function(a){var b;a.hasOwnProperty("action")&&
(b=-1<this.action_name.indexOf(a.action)?a.action:null);if(b){for(var d=this.meta,c="vn_zone vn_source vn_medium vn_campaign its_name its_url its_id its_title its_section its_subsection its_tag its_topic its_object its_embed its_author its_type its_wordcount its_publication".split(" "),e=0,h=c.length;e<h;e++){var f=c[e];d.hasOwnProperty(f)&&(a[f]=d[f])}a.platform=this.platform;a.fosp_loc=this.fosp_loc;a.referer=this.referer;a.link_ref=this.link_ref;a.location_url=this.location_url;a.site_id=this.site_id;
d=[];delete a.its_id;delete a.its_ref;for(var l in a)ca(a[l])||d.push(l+"="+R(a[l]));if(1>this.article_id&&-1<" play pageview buy addtocart checkout read like comment save fblike fbshare twitter ggplus".indexOf(a.action))return!1;d.push("its_id="+this.article_id);d.push("its_ref="+this.ref_id);d.push("fosp_aid="+this.fosp_aid);d.push("uid="+this.uid);d.push("my_vne="+this.my_vne);d.push("play_embed="+this.playEmbed);d.push("pageview_id="+this.pageview_id);ja("https://la3.vnecdn.net/"+b+"/?"+d.join("&"),
function(){});return!0}};if(M.push===Array.prototype.push){var m=new H;m.init();m.sendLog({action:"pageview"});if(q){var da=C(m.eventScroll,m);E(function(){L||(m.initReady(),D(g,"scroll",da,!1));L=!0})}var z={egg:m},Q=function(a){var b="play"==a.action?"play":"egg",d=a.meta&&a.meta.its_id||a.id||m.article_id;b=d==m.article_id?b:b+d;if(!(z[b]&&z[b]instanceof H)){var c=new H;c.action=a.action;c.playEmbed=a.play_embed||0;c.fosp_aid=m.fosp_aid;c.uid=m.uid;c.fosp_loc=m.fosp_loc;c.my_vne=m.my_vne;c.pageview_id=
"pageview"==a.action?Z(Math.random()+m.fosp_aid+Date.now()).substr(0,32):m.pageview_id;c.meta=m.meta;c.article_id=d;c.ref_id=m.article_id;c.referer=m.host;c.link_ref=m.link_ref;c.location_url="pageview"==a.action?g.location.href:m.location_url;c.platform=m.platform;if(a.meta&&ca(a.meta))for(var e in a.meta)c.meta[e]=a.meta[e];c.vnTracking();c.type=a.meta&&a.meta.its_type?a.meta.its_type:m.type;for(var h in z)z.hasOwnProperty(h)&&z[h]instanceof H&&z[h].type==c.type&&(z[h].logEggType={});c.initReady();
z[b]=c}return z[b]};E=function(a){if("[object Object]"!==Object.prototype.toString.call(a))return!1;Q(a).sendLog(a);return 1};q=0;for(var ka=M.length;q<ka;++q)E(M[q]);M.push=function(a){Q(a).sendLog(a);"pageview"==a.action&&a.meta&&"video"==a.meta.its_type&&(a=ba(a),a.action="play",a.ratio=0,Q(a).sendLog(a))};1003834==g.SITE_ID&&"pageview"==m.action&&"video"==m.type&&(q={action:"play",ratio:0},Q(q).sendLog(q))}})(window,document,location,history)}catch(g){console.log("egg:",g)};