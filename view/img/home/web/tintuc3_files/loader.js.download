!function(o){"function"==typeof define&&define.amd?define(o):o()}(function(){var init$1=function init(){return function(o,e,t){var i,n;"object"==typeof t&&"string"!=typeof t.nodeName?e(o,t):function(){var r=function o(e){for(var t in e)e.hasOwnProperty(t)&&(e[t]=o(e[t]));return Object.freeze(e)};for(n in i=["1.3.15-1"],e(o,t={}),t)t.hasOwnProperty(n)&&(null==Object.getOwnPropertyDescriptor(o,n)&&Object.defineProperty(o,n,{value:{}}),i.forEach(function(e){if(null==Object.getOwnPropertyDescriptor(o[n],e)){var i=r(t[n]);Object.defineProperty(o[n],e,{get:function(){return i},enumerable:!0})}}))}()}("undefined"==typeof global?window:global,function(omidGlobal,omidExports){var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.arrayIteratorImpl=function(o){var e=0;return function(){return e<o.length?{done:!1,value:o[e++]}:{done:!0}}},$jscomp.arrayIterator=function(o){return{next:$jscomp.arrayIteratorImpl(o)}},$jscomp.makeIterator=function(o){var e="undefined"!=typeof Symbol&&Symbol.iterator&&o[Symbol.iterator];return e?e.call(o):$jscomp.arrayIterator(o)},$jscomp.arrayFromIterator=function(o){for(var e,t=[];!(e=o.next()).done;)t.push(e.value);return t},$jscomp.arrayFromIterable=function(o){return o instanceof Array?o:$jscomp.arrayFromIterator($jscomp.makeIterator(o))},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.SIMPLE_FROUND_POLYFILL=!1,$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(o){var e=function(){};return e.prototype=o,new e},$jscomp.underscoreProtoCanBeSet=function(){var o={};try{return o.__proto__={a:!0},o.a}catch(o){}return!1},$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(o,e){if(o.__proto__=e,o.__proto__!==e)throw new TypeError(o+" is not extensible");return o}:null,$jscomp.inherits=function(o,e){if(o.prototype=$jscomp.objectCreate(e.prototype),o.prototype.constructor=o,$jscomp.setPrototypeOf){var t=$jscomp.setPrototypeOf;t(o,e)}else for(t in e)if("prototype"!=t)if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(e,t);i&&Object.defineProperty(o,t,i)}else o[t]=e[t];o.superClass_=e.prototype};var module$exports$omid$common$argsChecker={assertTruthyString:function(o,e){if(!e)throw Error("Value for "+o+" is undefined, null or blank.");if("string"!=typeof e&&!(e instanceof String))throw Error("Value for "+o+" is not a string.");if(""===e.trim())throw Error("Value for "+o+" is empty string.")},assertNotNullObject:function(o,e){if(null==e)throw Error("Value for "+o+" is undefined or null")},assertNumber:function(o,e){if(null==e)throw Error(o+" must not be null or undefined.");if("number"!=typeof e||isNaN(e))throw Error("Value for "+o+" is not a number")},assertNumberBetween:function(o,e,t,i){if((0,module$exports$omid$common$argsChecker.assertNumber)(o,e),e<t||e>i)throw Error("Value for "+o+" is outside the range ["+t+","+i+"]")},assertFunction:function(o,e){if(!e)throw Error(o+" must not be truthy.")},assertPositiveNumber:function(o,e){if((0,module$exports$omid$common$argsChecker.assertNumber)(o,e),0>e)throw Error(o+" must be a positive number.")}},module$exports$omid$common$VersionUtils={},module$contents$omid$common$VersionUtils_SEMVER_DIGITS_NUMBER=3;module$exports$omid$common$VersionUtils.isValidVersion=function(o){return/\d+\.\d+\.\d+(-.*)?/.test(o)},module$exports$omid$common$VersionUtils.versionGreaterOrEqual=function(o,e){o=o.split("-")[0].split("."),e=e.split("-")[0].split(".");for(var t=0;t<module$contents$omid$common$VersionUtils_SEMVER_DIGITS_NUMBER;t++){var i=parseInt(o[t],10),n=parseInt(e[t],10);if(i>n)break;if(i<n)return!1}return!0};var module$exports$omid$common$ArgsSerDe={},module$contents$omid$common$ArgsSerDe_ARGS_NOT_SERIALIZED_VERSION="1.0.3";module$exports$omid$common$ArgsSerDe.serializeMessageArgs=function(o,e){return(0,module$exports$omid$common$VersionUtils.isValidVersion)(o)&&(0,module$exports$omid$common$VersionUtils.versionGreaterOrEqual)(o,module$contents$omid$common$ArgsSerDe_ARGS_NOT_SERIALIZED_VERSION)?e:JSON.stringify(e)},module$exports$omid$common$ArgsSerDe.deserializeMessageArgs=function(o,e){return(0,module$exports$omid$common$VersionUtils.isValidVersion)(o)&&(0,module$exports$omid$common$VersionUtils.versionGreaterOrEqual)(o,module$contents$omid$common$ArgsSerDe_ARGS_NOT_SERIALIZED_VERSION)?e||[]:e&&"string"==typeof e?JSON.parse(e):[]};var module$exports$omid$common$constants={AdEventType:{IMPRESSION:"impression",LOADED:"loaded",GEOMETRY_CHANGE:"geometryChange",SESSION_START:"sessionStart",SESSION_ERROR:"sessionError",SESSION_FINISH:"sessionFinish",MEDIA:"media",VIDEO:"video",START:"start",FIRST_QUARTILE:"firstQuartile",MIDPOINT:"midpoint",THIRD_QUARTILE:"thirdQuartile",COMPLETE:"complete",PAUSE:"pause",RESUME:"resume",BUFFER_START:"bufferStart",BUFFER_FINISH:"bufferFinish",SKIPPED:"skipped",VOLUME_CHANGE:"volumeChange",PLAYER_STATE_CHANGE:"playerStateChange",AD_USER_INTERACTION:"adUserInteraction",STATE_CHANGE:"stateChange"},MediaEventType:{LOADED:"loaded",START:"start",FIRST_QUARTILE:"firstQuartile",MIDPOINT:"midpoint",THIRD_QUARTILE:"thirdQuartile",COMPLETE:"complete",PAUSE:"pause",RESUME:"resume",BUFFER_START:"bufferStart",BUFFER_FINISH:"bufferFinish",SKIPPED:"skipped",VOLUME_CHANGE:"volumeChange",PLAYER_STATE_CHANGE:"playerStateChange",AD_USER_INTERACTION:"adUserInteraction"},ImpressionType:{DEFINED_BY_JAVASCRIPT:"definedByJavaScript",UNSPECIFIED:"unspecified",LOADED:"loaded",BEGIN_TO_RENDER:"beginToRender",ONE_PIXEL:"onePixel",VIEWABLE:"viewable",AUDIBLE:"audible",OTHER:"other"},ErrorType:{GENERIC:"generic",VIDEO:"video",MEDIA:"media"},AdSessionType:{NATIVE:"native",HTML:"html",JAVASCRIPT:"javascript"},EventOwner:{NATIVE:"native",JAVASCRIPT:"javascript",NONE:"none"},AccessMode:{FULL:"full",DOMAIN:"domain",LIMITED:"limited"},AppState:{BACKGROUNDED:"backgrounded",FOREGROUNDED:"foregrounded"},Environment:{APP:"app",WEB:"web"},InteractionType:{CLICK:"click",INVITATION_ACCEPT:"invitationAccept"},CreativeType:{DEFINED_BY_JAVASCRIPT:"definedByJavaScript",HTML_DISPLAY:"htmlDisplay",NATIVE_DISPLAY:"nativeDisplay",VIDEO:"video",AUDIO:"audio"},MediaType:{DISPLAY:"display",VIDEO:"video"},Reason:{NOT_FOUND:"notFound",HIDDEN:"hidden",BACKGROUNDED:"backgrounded",VIEWPORT:"viewport",OBSTRUCTED:"obstructed",CLIPPED:"clipped",UNMEASURABLE:"unmeasurable"},SupportedFeatures:{CONTAINER:"clid",VIDEO:"vlid"},VideoPosition:{PREROLL:"preroll",MIDROLL:"midroll",POSTROLL:"postroll",STANDALONE:"standalone"},VideoPlayerState:{MINIMIZED:"minimized",COLLAPSED:"collapsed",NORMAL:"normal",EXPANDED:"expanded",FULLSCREEN:"fullscreen"},NativeViewKeys:{X:"x",LEFT:"left",Y:"y",TOP:"top",WIDTH:"width",HEIGHT:"height",AD_SESSION_ID:"adSessionId",IS_FRIENDLY_OBSTRUCTION_FOR:"isFriendlyObstructionFor",CLIPS_TO_BOUNDS:"clipsToBounds",CHILD_VIEWS:"childViews",END_X:"endX",END_Y:"endY",OBSTRUCTIONS:"obstructions",OBSTRUCTION_CLASS:"obstructionClass",OBSTRUCTION_PURPOSE:"obstructionPurpose",OBSTRUCTION_REASON:"obstructionReason",PIXELS:"pixels"},MeasurementStateChangeSource:{CONTAINER:"container",CREATIVE:"creative"},ElementMarkup:{OMID_ELEMENT_CLASS_NAME:"omid-element"},CommunicationType:{NONE:"NONE",DIRECT:"DIRECT",POST_MESSAGE:"POST_MESSAGE"},OmidImplementer:{OMSDK:"omsdk"}},module$contents$omid$common$InternalMessage_GUID_KEY="omid_message_guid",module$contents$omid$common$InternalMessage_METHOD_KEY="omid_message_method",module$contents$omid$common$InternalMessage_VERSION_KEY="omid_message_version",module$contents$omid$common$InternalMessage_ARGS_KEY="omid_message_args",module$exports$omid$common$InternalMessage=function(o,e,t,i){this.guid=o,this.method=e,this.version=t,this.args=i};module$exports$omid$common$InternalMessage.isValidSerializedMessage=function(o){return!!o&&void 0!==o[module$contents$omid$common$InternalMessage_GUID_KEY]&&void 0!==o[module$contents$omid$common$InternalMessage_METHOD_KEY]&&void 0!==o[module$contents$omid$common$InternalMessage_VERSION_KEY]&&"string"==typeof o[module$contents$omid$common$InternalMessage_GUID_KEY]&&"string"==typeof o[module$contents$omid$common$InternalMessage_METHOD_KEY]&&"string"==typeof o[module$contents$omid$common$InternalMessage_VERSION_KEY]&&(void 0===o[module$contents$omid$common$InternalMessage_ARGS_KEY]||void 0!==o[module$contents$omid$common$InternalMessage_ARGS_KEY])},module$exports$omid$common$InternalMessage.deserialize=function(o){return new module$exports$omid$common$InternalMessage(o[module$contents$omid$common$InternalMessage_GUID_KEY],o[module$contents$omid$common$InternalMessage_METHOD_KEY],o[module$contents$omid$common$InternalMessage_VERSION_KEY],o[module$contents$omid$common$InternalMessage_ARGS_KEY])},module$exports$omid$common$InternalMessage.prototype.serialize=function(){var o={};return o[module$contents$omid$common$InternalMessage_GUID_KEY]=this.guid,o[module$contents$omid$common$InternalMessage_METHOD_KEY]=this.method,o[module$contents$omid$common$InternalMessage_VERSION_KEY]=this.version,o=o,void 0!==this.args&&(o[module$contents$omid$common$InternalMessage_ARGS_KEY]=this.args),o};var module$exports$omid$common$Communication=function(o){this.to=o,this.communicationType_=module$exports$omid$common$constants.CommunicationType.NONE};module$exports$omid$common$Communication.prototype.sendMessage=function(o,e){},module$exports$omid$common$Communication.prototype.handleMessage=function(o,e){this.onMessage&&this.onMessage(o,e)},module$exports$omid$common$Communication.prototype.serialize=function(o){return JSON.stringify(o)},module$exports$omid$common$Communication.prototype.deserialize=function(o){return JSON.parse(o)},module$exports$omid$common$Communication.prototype.isDirectCommunication=function(){return this.communicationType_===module$exports$omid$common$constants.CommunicationType.DIRECT},module$exports$omid$common$Communication.prototype.isCrossOrigin=function(){};var module$exports$omid$common$DetectOmid={OMID_PRESENT_FRAME_NAME:"omid_v1_present",isOmidPresent:function(o){try{return!!o.frames&&!!o.frames[module$exports$omid$common$DetectOmid.OMID_PRESENT_FRAME_NAME]}catch(o){return!1}},declareOmidPresence:function(o){o.frames&&o.document&&(module$exports$omid$common$DetectOmid.OMID_PRESENT_FRAME_NAME in o.frames||(null==o.document.body&&module$exports$omid$common$DetectOmid.isMutationObserverAvailable_(o)?module$exports$omid$common$DetectOmid.registerMutationObserver_(o):o.document.body?module$exports$omid$common$DetectOmid.appendPresenceIframe_(o):o.document.write('<iframe style="display:none" id="'+module$exports$omid$common$DetectOmid.OMID_PRESENT_FRAME_NAME+'" name="'+module$exports$omid$common$DetectOmid.OMID_PRESENT_FRAME_NAME+'"></iframe>')))},appendPresenceIframe_:function(o){var e=o.document.createElement("iframe");e.id=module$exports$omid$common$DetectOmid.OMID_PRESENT_FRAME_NAME,e.name=module$exports$omid$common$DetectOmid.OMID_PRESENT_FRAME_NAME,e.style.display="none",o.document.body.appendChild(e)},isMutationObserverAvailable_:function(o){return"MutationObserver"in o},registerMutationObserver_:function(o){var e=new MutationObserver(function(t){t.forEach(function(t){"BODY"===t.addedNodes[0].nodeName&&(module$exports$omid$common$DetectOmid.appendPresenceIframe_(o),e.disconnect())})});e.observe(o.document.documentElement,{childList:!0})}},module$exports$omid$common$DirectCommunication=function o(e){module$exports$omid$common$Communication.call(this,e),this.communicationType_=module$exports$omid$common$constants.CommunicationType.DIRECT,this.handleExportedMessage=o.prototype.handleExportedMessage.bind(this)};$jscomp.inherits(module$exports$omid$common$DirectCommunication,module$exports$omid$common$Communication),module$exports$omid$common$DirectCommunication.prototype.sendMessage=function(o,e){if(!(e=void 0===e?this.to:e))throw Error("Message destination must be defined at construction time or when sending the message.");e.handleExportedMessage(o.serialize(),this)},module$exports$omid$common$DirectCommunication.prototype.handleExportedMessage=function(o,e){module$exports$omid$common$InternalMessage.isValidSerializedMessage(o)&&this.handleMessage(module$exports$omid$common$InternalMessage.deserialize(o),e)},module$exports$omid$common$DirectCommunication.prototype.isCrossOrigin=function(){return!1};var module$exports$omid$common$exporter={};function module$contents$omid$common$exporter_getOmidExports(){return void 0===omidExports?null:omidExports}function module$contents$omid$common$exporter_getOrCreateName(o,e){return o&&(o[e]||(o[e]={}))}module$exports$omid$common$exporter.packageExport=function(o,e,t){(t=void 0===t?module$contents$omid$common$exporter_getOmidExports():t)&&((o=o.split(".")).slice(0,o.length-1).reduce(module$contents$omid$common$exporter_getOrCreateName,t)[o[o.length-1]]=e)};var module$exports$omid$common$guid={generateGuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){var e=16*Math.random()|0;return"y"===o?(3&e|8).toString(16):e.toString(16)})}},module$exports$omid$common$logger={error:function(o){for(var e=[],t=0;t<arguments.length;++t)e[t-0]=arguments[t];module$contents$omid$common$logger_executeLog(function(){throw new(Function.prototype.bind.apply(Error,[null,"Could not complete the test successfully - "].concat($jscomp.arrayFromIterable(e))))},function(){return console.error.apply(console,$jscomp.arrayFromIterable(e))})},debug:function(o){for(var e=[],t=0;t<arguments.length;++t)e[t-0]=arguments[t];module$contents$omid$common$logger_executeLog(function(){},function(){return console.error.apply(console,$jscomp.arrayFromIterable(e))})}};function module$contents$omid$common$logger_executeLog(o,e){"undefined"!=typeof jasmine&&jasmine?o():"undefined"!=typeof console&&console&&console.error&&e()}var module$exports$omid$common$OmidGlobalProvider={},module$contents$omid$common$OmidGlobalProvider_globalThis=eval("this");function module$contents$omid$common$OmidGlobalProvider_getOmidGlobal(){if(void 0!==omidGlobal&&omidGlobal)return omidGlobal;if("undefined"!=typeof global&&global)return global;if("undefined"!=typeof window&&window)return window;if(void 0!==module$contents$omid$common$OmidGlobalProvider_globalThis&&module$contents$omid$common$OmidGlobalProvider_globalThis)return module$contents$omid$common$OmidGlobalProvider_globalThis;throw Error("Could not determine global object context.")}module$exports$omid$common$OmidGlobalProvider.omidGlobal=module$contents$omid$common$OmidGlobalProvider_getOmidGlobal();var module$exports$omid$common$windowUtils={};function module$contents$omid$common$windowUtils_isValidWindow(o){return null!=o&&void 0!==o.top&&null!=o.top}function module$contents$omid$common$windowUtils_isSameOriginForIE(o){return""===o.x||""!==o.x}module$exports$omid$common$windowUtils.isCrossOrigin=function(o){if(o===module$exports$omid$common$OmidGlobalProvider.omidGlobal)return!1;try{if(void 0===o.location.hostname)return!0;module$contents$omid$common$windowUtils_isSameOriginForIE(o)}catch(o){return!0}return!1},module$exports$omid$common$windowUtils.resolveGlobalContext=function(o){return void 0===o&&"undefined"!=typeof window&&window&&(o=window),module$contents$omid$common$windowUtils_isValidWindow(o)?o:module$exports$omid$common$OmidGlobalProvider.omidGlobal},module$exports$omid$common$windowUtils.resolveTopWindowContext=function(o){return module$contents$omid$common$windowUtils_isValidWindow(o)?o.top:module$exports$omid$common$OmidGlobalProvider.omidGlobal},module$exports$omid$common$windowUtils.evaluatePageUrl=function(o){if(!module$contents$omid$common$windowUtils_isValidWindow(o))return null;try{var e=o.top;return(0,module$exports$omid$common$windowUtils.isCrossOrigin)(e)?null:e.location.href}catch(o){return null}};var module$exports$omid$common$PostMessageCommunication=function(o,e){module$exports$omid$common$Communication.call(this,e=void 0===e?module$exports$omid$common$OmidGlobalProvider.omidGlobal:e);var t=this;this.communicationType_=module$exports$omid$common$constants.CommunicationType.POST_MESSAGE,o.addEventListener("message",function(o){if("object"==typeof o.data){var e=o.data;module$exports$omid$common$InternalMessage.isValidSerializedMessage(e)&&(e=module$exports$omid$common$InternalMessage.deserialize(e),o.source&&t.handleMessage(e,o.source))}})};$jscomp.inherits(module$exports$omid$common$PostMessageCommunication,module$exports$omid$common$Communication),module$exports$omid$common$PostMessageCommunication.isCompatibleContext=function(o){return!!(o&&o.addEventListener&&o.postMessage)},module$exports$omid$common$PostMessageCommunication.prototype.sendMessage=function(o,e){if(!(e=void 0===e?this.to:e))throw Error("Message destination must be defined at construction time or when sending the message.");e.postMessage(o.serialize(),"*")},module$exports$omid$common$PostMessageCommunication.prototype.isCrossOrigin=function(){return!this.to||(0,module$exports$omid$common$windowUtils.isCrossOrigin)(this.to)};var module$exports$omid$common$serviceCommunication={},module$contents$omid$common$serviceCommunication_EXPORTED_SESSION_COMMUNICATION_NAME=["omid","v1_SessionServiceCommunication"],module$contents$omid$common$serviceCommunication_EXPORTED_VERIFICATION_COMMUNICATION_NAME=["omid","v1_VerificationServiceCommunication"],module$contents$omid$common$serviceCommunication_EXPORTED_SERVICE_WINDOW_NAME=["omidVerificationProperties","serviceWindow"];function module$contents$omid$common$serviceCommunication_getValueForKeypath(o,e){return e.reduce(function(o,e){return o&&o[e]},o)}function module$contents$omid$common$serviceCommunication_startServiceCommunication(o,e,t,i){if(!(0,module$exports$omid$common$windowUtils.isCrossOrigin)(e))try{var n=module$contents$omid$common$serviceCommunication_getValueForKeypath(e,t);if(n)return new module$exports$omid$common$DirectCommunication(n)}catch(o){}return i(e)?new module$exports$omid$common$PostMessageCommunication(o,e):null}function module$contents$omid$common$serviceCommunication_startServiceCommunicationFromCandidates(o,e,t,i){for(var n=(e=$jscomp.makeIterator(e)).next();!n.done;n=e.next())if(n=module$contents$omid$common$serviceCommunication_startServiceCommunication(o,n.value,t,i))return n;return null}module$exports$omid$common$serviceCommunication.startSessionServiceCommunication=function(o,e,t){t=void 0===t?module$exports$omid$common$DetectOmid.isOmidPresent:t;var i=[o,(0,module$exports$omid$common$windowUtils.resolveTopWindowContext)(o)];return e&&i.unshift(e),module$contents$omid$common$serviceCommunication_startServiceCommunicationFromCandidates(o,i,module$contents$omid$common$serviceCommunication_EXPORTED_SESSION_COMMUNICATION_NAME,t)},module$exports$omid$common$serviceCommunication.startVerificationServiceCommunication=function(o,e){e=void 0===e?module$exports$omid$common$DetectOmid.isOmidPresent:e;var t=[],i=module$contents$omid$common$serviceCommunication_getValueForKeypath(o,module$contents$omid$common$serviceCommunication_EXPORTED_SERVICE_WINDOW_NAME);return i&&t.push(i),t.push((0,module$exports$omid$common$windowUtils.resolveTopWindowContext)(o)),module$contents$omid$common$serviceCommunication_startServiceCommunicationFromCandidates(o,t,module$contents$omid$common$serviceCommunication_EXPORTED_VERIFICATION_COMMUNICATION_NAME,e)};var module$exports$omid$common$version={ApiVersion:"1.0",Version:"1.3.15-1"},module$contents$omid$verificationClient$VerificationClient_VERIFICATION_CLIENT_VERSION=module$exports$omid$common$version.Version;function module$contents$omid$verificationClient$VerificationClient_getThirdPartyOmid(){var o=module$exports$omid$common$OmidGlobalProvider.omidGlobal.omid3p;return o&&"function"==typeof o.registerSessionObserver&&"function"==typeof o.addEventListener?o:null}var module$exports$omid$verificationClient$VerificationClient=function(o){(this.communication=o||(0,module$exports$omid$common$serviceCommunication.startVerificationServiceCommunication)((0,module$exports$omid$common$windowUtils.resolveGlobalContext)()))?this.communication.onMessage=this.handleMessage_.bind(this):(o=module$contents$omid$verificationClient$VerificationClient_getThirdPartyOmid())&&(this.omid3p=o),this.remoteIntervals_=this.remoteTimeouts_=0,this.callbackMap_={},this.imgCache_=[],this.injectionId_=(o=module$exports$omid$common$OmidGlobalProvider.omidGlobal.omidVerificationProperties)?o.injectionId:void 0};module$exports$omid$verificationClient$VerificationClient.prototype.isSupported=function(){return!(!this.communication&&!this.omid3p)},module$exports$omid$verificationClient$VerificationClient.prototype.registerSessionObserver=function(o,e){(0,module$exports$omid$common$argsChecker.assertFunction)("functionToExecute",o),this.omid3p?this.omid3p.registerSessionObserver(o,e,this.injectionId_):this.sendMessage_("addSessionListener",o,e,this.injectionId_)},module$exports$omid$verificationClient$VerificationClient.prototype.addEventListener=function(o,e){(0,module$exports$omid$common$argsChecker.assertTruthyString)("eventType",o),(0,module$exports$omid$common$argsChecker.assertFunction)("functionToExecute",e),this.omid3p?this.omid3p.addEventListener(o,e):this.sendMessage_("addEventListener",e,o)},module$exports$omid$verificationClient$VerificationClient.prototype.sendUrl=function(o,e,t){(0,module$exports$omid$common$argsChecker.assertTruthyString)("url",o),module$exports$omid$common$OmidGlobalProvider.omidGlobal.document&&module$exports$omid$common$OmidGlobalProvider.omidGlobal.document.createElement?this.sendUrlWithImg_(o,e,t):this.sendMessage_("sendUrl",function(o){o&&e?e():!o&&t&&t()},o)},module$exports$omid$verificationClient$VerificationClient.prototype.sendUrlWithImg_=function(o,e,t){var i=this,n=module$exports$omid$common$OmidGlobalProvider.omidGlobal.document.createElement("img");this.imgCache_.push(n);var r=function(o){var e=i.imgCache_.indexOf(n);0<=e&&i.imgCache_.splice(e,1),o&&o()};n.addEventListener("load",r.bind(this,e)),n.addEventListener("error",r.bind(this,t)),n.src=o},module$exports$omid$verificationClient$VerificationClient.prototype.injectJavaScriptResource=function(o,e,t){var i=this;(0,module$exports$omid$common$argsChecker.assertTruthyString)("url",o),module$exports$omid$common$OmidGlobalProvider.omidGlobal.document?this.injectJavascriptResourceUrlInDom_(o,e,t):this.sendMessage_("injectJavaScriptResource",function(n,r){n?(i.evaluateJavaScript_(r,o),e()):(module$exports$omid$common$logger.error("Service failed to load JavaScript resource."),t())},o)},module$exports$omid$verificationClient$VerificationClient.prototype.injectJavascriptResourceUrlInDom_=function(o,e,t){var i=module$exports$omid$common$OmidGlobalProvider.omidGlobal.document,n=i.body;(i=i.createElement("script")).onload=e,i.onerror=t,i.src=o,i.type="application/javascript",n.appendChild(i)},module$exports$omid$verificationClient$VerificationClient.prototype.evaluateJavaScript_=function(a,b){try{eval(a)}catch(o){module$exports$omid$common$logger.error('Error evaluating the JavaScript resource from "'+b+'".')}},module$exports$omid$verificationClient$VerificationClient.prototype.setTimeout=function(o,e){if((0,module$exports$omid$common$argsChecker.assertFunction)("functionToExecute",o),(0,module$exports$omid$common$argsChecker.assertPositiveNumber)("timeInMillis",e),this.hasTimeoutMethods_())return module$exports$omid$common$OmidGlobalProvider.omidGlobal.setTimeout(o,e);var t=this.remoteTimeouts_++;return this.sendMessage_("setTimeout",o,t,e),t},module$exports$omid$verificationClient$VerificationClient.prototype.clearTimeout=function(o){(0,module$exports$omid$common$argsChecker.assertPositiveNumber)("timeoutId",o),this.hasTimeoutMethods_()?module$exports$omid$common$OmidGlobalProvider.omidGlobal.clearTimeout(o):this.sendOneWayMessage_("clearTimeout",o)},module$exports$omid$verificationClient$VerificationClient.prototype.setInterval=function(o,e){if((0,module$exports$omid$common$argsChecker.assertFunction)("functionToExecute",o),(0,module$exports$omid$common$argsChecker.assertPositiveNumber)("timeInMillis",e),this.hasIntervalMethods_())return module$exports$omid$common$OmidGlobalProvider.omidGlobal.setInterval(o,e);var t=this.remoteIntervals_++;return this.sendMessage_("setInterval",o,t,e),t},module$exports$omid$verificationClient$VerificationClient.prototype.clearInterval=function(o){(0,module$exports$omid$common$argsChecker.assertPositiveNumber)("intervalId",o),this.hasIntervalMethods_()?module$exports$omid$common$OmidGlobalProvider.omidGlobal.clearInterval(o):this.sendOneWayMessage_("clearInterval",o)},module$exports$omid$verificationClient$VerificationClient.prototype.hasTimeoutMethods_=function(){return"function"==typeof module$exports$omid$common$OmidGlobalProvider.omidGlobal.setTimeout&&"function"==typeof module$exports$omid$common$OmidGlobalProvider.omidGlobal.clearTimeout},module$exports$omid$verificationClient$VerificationClient.prototype.hasIntervalMethods_=function(){return"function"==typeof module$exports$omid$common$OmidGlobalProvider.omidGlobal.setInterval&&"function"==typeof module$exports$omid$common$OmidGlobalProvider.omidGlobal.clearInterval},module$exports$omid$verificationClient$VerificationClient.prototype.handleMessage_=function(o,e){e=o.method;var t=o.guid;if(o=o.args,"response"===e&&this.callbackMap_[t]){var i=(0,module$exports$omid$common$ArgsSerDe.deserializeMessageArgs)(module$contents$omid$verificationClient$VerificationClient_VERIFICATION_CLIENT_VERSION,o);this.callbackMap_[t].apply(this,i)}"error"===e&&window.console&&module$exports$omid$common$logger.error(o)},module$exports$omid$verificationClient$VerificationClient.prototype.sendOneWayMessage_=function(o,e){for(var t=[],i=1;i<arguments.length;++i)t[i-1]=arguments[i];this.sendMessage_.apply(this,[o,null].concat($jscomp.arrayFromIterable(t)))},module$exports$omid$verificationClient$VerificationClient.prototype.sendMessage_=function(o,e,t){for(var i=[],n=2;n<arguments.length;++n)i[n-2]=arguments[n];this.communication&&(n=(0,module$exports$omid$common$guid.generateGuid)(),e&&(this.callbackMap_[n]=e),i=new module$exports$omid$common$InternalMessage(n,"VerificationService."+o,module$contents$omid$verificationClient$VerificationClient_VERIFICATION_CLIENT_VERSION,(0,module$exports$omid$common$ArgsSerDe.serializeMessageArgs)(module$contents$omid$verificationClient$VerificationClient_VERIFICATION_CLIENT_VERSION,i)),this.communication.sendMessage(i))},(0,module$exports$omid$common$exporter.packageExport)("OmidVerificationClient",module$exports$omid$verificationClient$VerificationClient)},"undefined"==typeof exports?void 0:exports),window.OmidVerificationClient&&window.OmidVerificationClient["1.3.15-1"]},init=function(o){var e=o.width,t=o.height,i=o.src,n=o.container,r=o.clickTag,m=o.tagObject,s=document.createElement("iframe");s.name="seenthis_tag_container",s.style="overflow: hidden; border: 0px; display: block;",e&&(s.style.width=e),t&&(s.style.height=t),s.frameBorder=0,s.scrolling="no",s.onload=function(){try{s.contentWindow&&(s.contentWindow.clickTag1=r,s.contentWindow.seenthisTag=m)}catch(o){}},n.appendChild(s);var d=!!("fetch"in window);return"srcdoc"in s&&d?fetch(i).then(function(o){return o.text().then(function(o){s.srcdoc=o})}).catch(function(){s.src=i}):s.src=i,s},rectIsInscreenIE=function(o){var e=!!document.elementFromPoint(o.left+1,o.top+1),t=!!document.elementFromPoint(o.right-1,o.top+1),i=!!document.elementFromPoint(o.left+1,o.bottom-1),n=!!document.elementFromPoint(o.right-1,o.bottom-1);return e||t||i||n},efpObserve=function(o,e){var t=null;return setInterval(function(){var i=o.parentElement.getBoundingClientRect(),n=rectIsInscreenIE(i);t!==n&&e(t=n)},100)},setupIntersectionObserver=function(o,e){var t=new IntersectionObserver(function(o){var t=o[0];void 0!==t.isIntersecting?e(t.isIntersecting,t.intersectionRatio):void 0!==t.intersectionRatio&&e(t.intersectionRatio>0)},{rootMargin:"0px",threshold:[0,.5]});return t.observe(o),t},setupOmidInScreenObserver=function(o,e,t){var i=function(o){e(!!(o.data.adView.percentageInView>0))};o.registerSessionObserver(function(e){var n=e.type,r=e.data;"sessionFinish"==n||("sessionError"==n?t():"limited"===r.context.accessMode?o.addEventListener("geometryChange",i):t())})},observe=function o(e){var t=e.omidClient,i=e.containerElement,n=e.onInScreenChanged,r=e.skip;return!0!==(void 0===r?{omid:!1}:r).omid&&t&&t.isSupported()?{observer:setupOmidInScreenObserver(t,n,function(){o({omidClient:t,containerElement:i,onInScreenChanged:n,skip:{omid:!0}})}),type:"omid"}:window.IntersectionObserver&&i?{observer:setupIntersectionObserver(i,n),type:"intersectionObserver"}:{observer:efpObserve(i,n),type:"efp"}},observeImpressionEvent=function(o){var e=o.omidClient,t=o.onImpression,i=!1,n="load";return e&&e.isSupported()?(n="omid",e.addEventListener("impression",function(o){i=!0,t(n)})):(i=!0,t(n)),{type:n,impressionOccurred:i}},eventDispatcher=function(o,e){var t=function(e,t){o.postMessage({name:"seenthis-tag",event:e,params:t},"*")};return window.addEventListener("message",function(o){"seenthis-tag-init"===o.data.name&&t("init",e)}),{dispatch:t}};window.__seenthis_events=window.__seenthis_events||[],function(){try{var o=document.currentScript||document.querySelector("script[src*=tag-loader]"),e=o.getAttribute("data-clicktag"),t=o.getAttribute("data-width"),i=o.getAttribute("data-height"),n=o.getAttribute("data-src"),r={v:"1",inscreen:void 0,impressionOccurred:!1,clickTag:e};m=function(o){var m,s=init({width:t,height:i,src:n,container:o,clickTag:e,tagObject:r}),d=eventDispatcher(s.contentWindow,r);try{var c=init$1();init$1&&(m=new c)}catch(o){}observeImpressionEvent({omidClient:m,onImpression:function(o){r.impressionOccurred=!0,r.impressionType=o,d.dispatch("impression",o)}});var a=observe({omidClient:m,containerElement:o,onInScreenChanged:function(o){r.inscreen!==o&&(r.inscreen=o,d.dispatch("in_screen_changed",o))}});r.inscreenObserverType=a.type,window.seenthisTag=r},o&&o.parentElement&&o.parentElement!==document.head?m(o.parentElement):document.body||"loading"!==document.readyState?m(document.body):window.addEventListener("DOMContentLoaded",function(){return m(document.body)})}catch(o){}var m}()});
